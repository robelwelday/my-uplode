"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[358],{358:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var n=t(555),r=t(43),o=t(576),l=t(931),s=t(579);const d=function(){var e,a;const t=(0,o.Zp)(),[d,i]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[m,u]=(0,r.useState)({name:{en:"",am:"",ti:""},description:{en:"",am:"",ti:""},price:"",image:null}),[g,h]=(0,r.useState)({title:{},content:{},coverImage:null}),[A,x]=(0,r.useState)(null),[b,v]=(0,r.useState)(null),[N,j]=(0,r.useState)(null),[y,f]=(0,r.useState)(null);return(0,r.useEffect)(()=>{localStorage.getItem("adminToken")?(l.A.get("/products").then(e=>i(e.data)).catch(e=>console.error("Failed to fetch products:",e)),l.A.get("/news").then(e=>p(e.data)).catch(e=>console.error("Failed to fetch news:",e))):t("/admin/login")},[t]),(0,s.jsxs)("div",{className:"p-8 bg-gray-100 min-h-screen",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-8 text-center",children:"Admin Dashboard"}),(0,s.jsxs)("section",{className:"mb-12",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Manage Products"}),(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("name",JSON.stringify(m.name)),a.append("description",JSON.stringify(m.description)),a.append("price",m.price),m.image&&a.append("image",m.image),console.log("FormData for product:",Object.fromEntries(a));try{const t=localStorage.getItem("adminToken"),n=await l.A.post("/products",a,{headers:{Authorization:"Bearer ".concat(t)}});i(e=>[...e,n.data]),u({name:{en:"",am:"",ti:""},description:{en:"",am:"",ti:""},price:"",image:null}),e.target.reset()}catch(n){var t;console.error("Failed to add product:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message)}},className:"bg-white p-6 rounded shadow mb-6",children:[(0,s.jsx)("h4",{className:"text-xl font-bold mb-4",children:"Add New Product"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Name (English)",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{name:(0,n.A)((0,n.A)({},m.name),{},{en:e.target.value})})),required:!0,className:"p-3 border rounded"}),(0,s.jsx)("input",{type:"text",placeholder:"Name (Amharic)",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{name:(0,n.A)((0,n.A)({},m.name),{},{am:e.target.value})})),required:!0,className:"p-3 border rounded"}),(0,s.jsx)("input",{type:"text",placeholder:"Name (Tigrinya)",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{name:(0,n.A)((0,n.A)({},m.name),{},{ti:e.target.value})})),required:!0,className:"p-3 border rounded"}),(0,s.jsx)("textarea",{placeholder:"Description (English)",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{description:(0,n.A)((0,n.A)({},m.description),{},{en:e.target.value})})),required:!0,className:"p-3 border rounded md:col-span-3"}),(0,s.jsx)("textarea",{placeholder:"Description (Amharic)",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{description:(0,n.A)((0,n.A)({},m.description),{},{am:e.target.value})})),required:!0,className:"p-3 border rounded md:col-span-3"}),(0,s.jsx)("textarea",{placeholder:"Description (Tigrinya)",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{description:(0,n.A)((0,n.A)({},m.description),{},{ti:e.target.value})})),required:!0,className:"p-3 border rounded md:col-span-3"}),(0,s.jsx)("input",{type:"number",placeholder:"Price",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{price:e.target.value})),required:!0,className:"p-3 border rounded"}),(0,s.jsx)("input",{type:"file",onChange:e=>u((0,n.A)((0,n.A)({},m),{},{image:e.target.files[0]})),required:!0,className:"p-3 border rounded md:col-span-2"})]}),(0,s.jsx)("button",{type:"submit",className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Add Product"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>{var a;return(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,s.jsx)("h4",{className:"text-lg font-bold break-words whitespace-pre-wrap",children:(null===(a=e.name)||void 0===a?void 0:a.en)||"Unnamed Product"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Price: Birr ",e.price||"N/A"]}),(0,s.jsx)("p",{className:"mt-2 text-sm font-bold ".concat(e.available?"text-green-500":"text-red-500"),children:e.available?"Available":"Unavailable"}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>(async(e,a)=>{try{const t=localStorage.getItem("adminToken"),r=await l.A.patch("/products/".concat(e),{available:!a},{headers:{Authorization:"Bearer ".concat(t)}});i(a=>a.map(a=>a._id===e?(0,n.A)((0,n.A)({},a),{},{available:r.data.available}):a))}catch(r){var t;console.error("Failed to toggle availability:",(null===(t=r.response)||void 0===t?void 0:t.data)||r.message)}})(e._id,e.available),className:"text-blue-600 hover:underline",children:"Toggle Availability"}),(0,s.jsx)("button",{onClick:()=>{x(e),v((0,n.A)({},e))},className:"text-green-600 hover:underline",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>(async e=>{try{const a=localStorage.getItem("adminToken");await l.A.delete("/products/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}}),i(a=>a.filter(a=>a._id!==e))}catch(a){console.error("Failed to delete product:",a)}})(e._id),className:"text-red-600 hover:underline",children:"Delete"})]})]},e._id)})}),A&&b&&(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!A)return;const a=new FormData;a.append("name",JSON.stringify(b.name)),a.append("description",JSON.stringify(b.description)),b.image instanceof File&&a.append("image",b.image);try{const e=localStorage.getItem("adminToken"),t=await l.A.patch("/products/".concat(A._id),a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});i(e=>e.map(e=>e._id===A._id?t.data:e)),x(null),v(null)}catch(n){var t;console.error("Failed to update product:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message)}},className:"bg-white p-6 rounded shadow my-6",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold mb-4",children:["Edit Product: ",null===(e=A.name)||void 0===e?void 0:e.en]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("input",{type:"text",value:b.name.en,onChange:e=>v((0,n.A)((0,n.A)({},b),{},{name:(0,n.A)((0,n.A)({},b.name),{},{en:e.target.value})})),className:"p-3 border rounded",placeholder:"Name (English)"}),(0,s.jsx)("input",{type:"text",value:b.name.am,onChange:e=>v((0,n.A)((0,n.A)({},b),{},{name:(0,n.A)((0,n.A)({},b.name),{},{am:e.target.value})})),className:"p-3 border rounded",placeholder:"Name (Amharic)"}),(0,s.jsx)("input",{type:"text",value:b.name.ti,onChange:e=>v((0,n.A)((0,n.A)({},b),{},{name:(0,n.A)((0,n.A)({},b.name),{},{ti:e.target.value})})),className:"p-3 border rounded",placeholder:"Name (Tigrinya)"}),(0,s.jsx)("textarea",{value:b.description.en,onChange:e=>v((0,n.A)((0,n.A)({},b),{},{description:(0,n.A)((0,n.A)({},b.description),{},{en:e.target.value})})),className:"p-3 border rounded md:col-span-3",placeholder:"Description (English)"}),(0,s.jsx)("textarea",{value:b.description.am,onChange:e=>v((0,n.A)((0,n.A)({},b),{},{description:(0,n.A)((0,n.A)({},b.description),{},{am:e.target.value})})),className:"p-3 border rounded md:col-span-3",placeholder:"Description (Amharic)"}),(0,s.jsx)("textarea",{value:b.description.ti,onChange:e=>v((0,n.A)((0,n.A)({},b),{},{description:(0,n.A)((0,n.A)({},b.description),{},{ti:e.target.value})})),className:"p-3 border rounded md:col-span-3",placeholder:"Description (Tigrinya)"}),(0,s.jsx)("input",{type:"file",onChange:e=>v((0,n.A)((0,n.A)({},b),{},{image:e.target.files[0]})),className:"p-3 border rounded md:col-span-3"})]}),(0,s.jsxs)("div",{className:"mt-4 flex space-x-4",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Update Product"}),(0,s.jsx)("button",{type:"button",onClick:()=>{x(null),v(null)},className:"bg-gray-300 px-6 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})]}),(0,s.jsxs)("section",{className:"mb-12",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Manage Products"}),(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("title",JSON.stringify(g.title)),a.append("content",JSON.stringify(g.content)),g.coverImage&&a.append("coverImage",g.coverImage),console.log("FormData for news:",Object.fromEntries(a));try{const t=localStorage.getItem("adminToken"),n=await l.A.post("/news",a,{headers:{Authorization:"Bearer ".concat(t)}});p(e=>[...e,n.data]),h({title:{},content:{},coverImage:null}),e.target.reset()}catch(n){var t;console.error("Failed to add news:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message)}},className:"bg-white p-6 rounded shadow mb-6",children:[(0,s.jsx)("h4",{className:"text-xl font-bold mb-4",children:"Add Product to Products"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Title (English)",onChange:e=>h((0,n.A)((0,n.A)({},g),{},{title:(0,n.A)((0,n.A)({},g.title),{},{en:e.target.value})})),required:!0,className:"p-3 border rounded"}),(0,s.jsx)("input",{type:"text",placeholder:"Title (Amharic)",onChange:e=>h((0,n.A)((0,n.A)({},g),{},{title:(0,n.A)((0,n.A)({},g.title),{},{am:e.target.value})})),required:!0,className:"p-3 border rounded"}),(0,s.jsx)("input",{type:"text",placeholder:"Title (Tigrinya)",onChange:e=>h((0,n.A)((0,n.A)({},g),{},{title:(0,n.A)((0,n.A)({},g.title),{},{ti:e.target.value})})),required:!0,className:"p-3 border rounded"}),(0,s.jsx)("textarea",{placeholder:"Content (English)",onChange:e=>h((0,n.A)((0,n.A)({},g),{},{content:(0,n.A)((0,n.A)({},g.content),{},{en:e.target.value})})),required:!0,className:"p-3 border rounded md:col-span-3"}),(0,s.jsx)("textarea",{placeholder:"Content (Amharic)",onChange:e=>h((0,n.A)((0,n.A)({},g),{},{content:(0,n.A)((0,n.A)({},g.content),{},{am:e.target.value})})),required:!0,className:"p-3 border rounded md:col-span-3"}),(0,s.jsx)("textarea",{placeholder:"Content (Tigrinya)",onChange:e=>h((0,n.A)((0,n.A)({},g),{},{content:(0,n.A)((0,n.A)({},g.content),{},{ti:e.target.value})})),required:!0,className:"p-3 border rounded md:col-span-3"}),(0,s.jsx)("input",{type:"file",onChange:e=>h((0,n.A)((0,n.A)({},g),{},{coverImage:e.target.files[0]})),required:!0,className:"p-3 border rounded md:col-span-3"})]}),(0,s.jsx)("button",{type:"submit",className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Add News"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(e=>{var a;return(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,s.jsx)("h4",{className:"text-lg font-bold break-words whitespace-pre-wrap",children:(null===(a=e.title)||void 0===a?void 0:a.en)||"Untitled News"}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>{j(e),f((0,n.A)({},e))},className:"text-green-600 hover:underline",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>(async e=>{try{const a=localStorage.getItem("adminToken");await l.A.delete("/news/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}}),p(a=>a.filter(a=>a._id!==e))}catch(a){console.error("Failed to delete news:",a)}})(e._id),className:"mt-2 text-red-600 hover:underline",children:"Delete"})]})]},e._id)})}),N&&y&&(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!N)return;const a=new FormData;a.append("title",JSON.stringify(y.title)),a.append("content",JSON.stringify(y.content)),y.coverImage instanceof File&&a.append("coverImage",y.coverImage);try{const e=localStorage.getItem("adminToken"),t=await l.A.patch("/news/".concat(N._id),a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});p(e=>e.map(e=>e._id===N._id?t.data:e)),j(null),f(null)}catch(n){var t;console.error("Failed to update news:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message)}},className:"bg-white p-6 rounded shadow my-6",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold mb-4",children:["Edit News: ",null===(a=N.title)||void 0===a?void 0:a.en]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("input",{type:"text",value:y.title.en||"",onChange:e=>f((0,n.A)((0,n.A)({},y),{},{title:(0,n.A)((0,n.A)({},y.title),{},{en:e.target.value})})),className:"p-3 border rounded",placeholder:"Title (English)"}),(0,s.jsx)("input",{type:"text",value:y.title.am||"",onChange:e=>f((0,n.A)((0,n.A)({},y),{},{title:(0,n.A)((0,n.A)({},y.title),{},{am:e.target.value})})),className:"p-3 border rounded",placeholder:"Title (Amharic)"}),(0,s.jsx)("input",{type:"text",value:y.title.ti||"",onChange:e=>f((0,n.A)((0,n.A)({},y),{},{title:(0,n.A)((0,n.A)({},y.title),{},{ti:e.target.value})})),className:"p-3 border rounded",placeholder:"Title (Tigrinya)"}),(0,s.jsx)("textarea",{value:y.content.en||"",onChange:e=>f((0,n.A)((0,n.A)({},y),{},{content:(0,n.A)((0,n.A)({},y.content),{},{en:e.target.value})})),className:"p-3 border rounded md:col-span-3",placeholder:"Content (English)"}),(0,s.jsx)("textarea",{value:y.content.am||"",onChange:e=>f((0,n.A)((0,n.A)({},y),{},{content:(0,n.A)((0,n.A)({},y.content),{},{am:e.target.value})})),className:"p-3 border rounded md:col-span-3",placeholder:"Content (Amharic)"}),(0,s.jsx)("textarea",{value:y.content.ti||"",onChange:e=>f((0,n.A)((0,n.A)({},y),{},{content:(0,n.A)((0,n.A)({},y.content),{},{ti:e.target.value})})),className:"p-3 border rounded md:col-span-3",placeholder:"Content (Tigrinya)"}),(0,s.jsx)("input",{type:"file",onChange:e=>f((0,n.A)((0,n.A)({},y),{},{coverImage:e.target.files[0]})),className:"p-3 border rounded md:col-span-3"})]}),(0,s.jsxs)("div",{className:"mt-4 flex space-x-4",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700",children:"Update News"}),(0,s.jsx)("button",{type:"button",onClick:()=>{j(null),f(null)},className:"bg-gray-300 px-6 py-2 rounded hover:bg-gray-400",children:"Cancel"})]})]})]})]})}},931:(e,a,t)=>{t.d(a,{A:()=>n});const n=t(722).A.create({baseURL:"/api"})}}]);
//# sourceMappingURL=358.b993b898.chunk.js.map